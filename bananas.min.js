var startGameText="התחל משחק",reloadGameText="התחל משחק\nחדש",scoringGameMessage="הניקוד שלך: \n ",startGameMessage="עליך להגיע ליותר מ 1200 נקודות בדקה!",soundFile="./assets/sounds/Switches78.mp3",audio=new Audio(soundFile);let iTime=58;function renderView(){let e=document.getElementById("start"),t=document.getElementById("end");window.innerWidth;e.style.display="block",t.style.display="block",t.innerText=startGameMessage,t.style.marginTop=.4*window.innerHeight}function startGame(){window.innerWidth;var e,t,n,i=iTime,a=document.createElement("img");a.src="./assets/images/stat2.png",a.onload=p,a.width=img_1.width,a.height=img_1.height;var s=document.createElement("img");s.src="./assets/images/stat1.png",s.onload=p,s.width=img_2.width,s.height=img_2.height;var d=document.createElement("img");d.src="./assets/images/benel1.png",d.onload=p,d.width=img_3.width,d.height=img_3.height;var o=document.createElement("img");o.src="./assets/images/benel2.png",o.onload=p,o.width=img_4.width,o.height=img_4.height;var r=[a,s,d,o],m=!1,g=0,l=document.getElementById("score");l.innerText=g,document.getElementById("popUp").style.display="none";var c=document.getElementById("canvas"),h=new createjs.StageGL(c,{antialias:!0,transparent:!0});createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Touch.enable(h,!1,!0);var w=h.addChild(new createjs.Container);!function(){var e=document.createElement("img");e.src="./assets/images/pipeline.svg",e.onload=p;let i=.3*window.innerWidth;i=i<250?i:250,e.width=i,e.height=2*i;var a=new createjs.Bitmap(e),s=n?n.x:window.innerWidth/2-a.image.width/2;w.addChild(a),a.set({x:s,y:window.innerHeight-.6*a.image.height,rotation:10}),t=a}(),(e=new createjs.Bitmap(s)).set({x:window.innerWidth/2+s.width/2,y:0}),w.addChild(e),setInterval(()=>{m?(a=r[0],s=r[1]):(a=r[2],s=r[3]),m=!m},1e4),function e(){var t=i;void 0===t&&(t=59);let n=document.getElementById("mycounter");t<=20?n.style.color="red":t<=40&&(n.style.color="#8e8e00");t<10&&(t="0"+t,n.classList.contains("blink")||n.classList.add("blink_me"));n.innerHTML="0:"+t;i--;if(t<=0){n.innerHTML="0",n.classList.remove("blink_me"),T=!0;let e=document.getElementById("popUp"),t=document.getElementById("score");e.style.display="block",end.innerText=scoringGameMessage+t.innerText,start.innerText=reloadGameText,end.style.display="block"}else setTimeout(e,1e3)}();var u=document.createElement("img");u.src="./assets/images/banana.png",u.onload=p,B();var y=[];function p(){createjs.Ticker.on("tick",f)}var v=0,x=.999,T=!1,E=!1;function f(d){if(!T){v%15==0&&function(e){e||(e=new createjs.Bitmap(u).set({regX:u.naturalWidth/2,regY:u.naturalHeight/2}),y.push(e),w.addChild(e));var i=2*Math.random()+1,a=(Math.random(),n?n.x:c.width/2);e.set({x:a,y:t.y+.1*t.image.height,speed:i,rotation:360*Math.random(),rotationSpeed:3*Math.random()-1.5,addX:0,addY:0,power:0}),e.scale=i/3.5}(),v++;var o=e._getBounds();o.x+o.width>window.innerWidth?x=-1:e._getBounds().x<=0&&(x=1);var r=(60-i)/60,m=-1===x?-1*r:r,p=e._getBounds();e.x=e.x+(x+m);var f=p.y<=-.1*p.height;f?1.001:.999,e.scaleX>1.5?.9995:e.scaleX<.7&&1.0005,e.image=E?s:a;for(var B=y.length-1;B>=0;B--){var _=y[B];_.y-=_.speed,_.rotation=(_.rotation+_.rotationSpeed)%360,_.x+=_.addX,_.y+=_.addY,_.addY>0&&(_.addY*=.9);p=e._getBounds();var b=_.x>p.x+10,j=_.x<p.x+p.width-10;if(b&&j){var k=_.y<=e.y+e.image.height-40,M=_.y<=e.y+1.2*e.image.height;if(k){var G=e.y<0?0:e.y;G+e.image.height<t.y?createjs.Tween.get(e).to({y:G+5},100).to({y:G-5-.3*(60-i)},100):createjs.Tween.get(e).to({y:G-50-(60-i)},100),audio.play(),g++,l.innerText=g,y.splice(B,1),_.parent.removeChild(_),E=!0,setTimeout(()=>{E=!1},200)}else M&&_.scale>.3&&(_.scale=.96*_.scale)}else _.y<=0&&(y.splice(B,1),_.parent.removeChild(_))}!1,h.update(d)}}function B(e){var t=window.innerWidth,n=window.innerHeight;c.width=t,c.height=n,h.updateViewport(t,n),h.update()}window.addEventListener("resize",B,!1),h.on("stagemousedown",function(){console.log("stagemousedown")}),h.addEventListener("stagemousemove",function(e){n={x:e.stageX,y:e.stageY},t&&(t.x=n.x-80)})}